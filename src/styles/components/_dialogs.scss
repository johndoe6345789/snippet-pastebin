@use '../abstracts' as *;

// ============================================
// Material Design 3 Dialog/Modal Styles
// ============================================

// Scrim/Overlay
[data-slot="dialog-overlay"],
.dialog-overlay {
  animation: md3-fade-in $duration-medium-2 $easing-emphasized-decelerate;
  background-color: rgba($scrim, 0.32); // MD3 scrim opacity
  inset: 0;
  position: fixed;
  z-index: 50;
}

// Dialog Content (MD3 Basic Dialog)
[data-slot="dialog"],
.dialog-content {
  animation: md3-dialog-enter $duration-medium-2 $easing-emphasized-decelerate;
  background: $surface-container-high;
  border: none;
  border-radius: $radius-extra-large;
  box-shadow: $elevation-3;
  left: 50%;
  max-height: calc(100vh - 96px);
  max-width: 560px;
  overflow-y: auto;
  padding: $size-6;
  position: fixed;
  top: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% - 48px);
  z-index: 50;

  &:focus {
    outline: none;
  }
}

// Dialog Header
[data-slot="dialog-header"],
.dialog-header {
  display: flex;
  flex-direction: column;
  gap: $size-4;
  margin-bottom: $size-6;
}

// Dialog Title (MD3 Headline Small)
[data-slot="dialog-title"],
.dialog-title {
  color: $on-surface;
  font-size: $font-headline-small;
  font-weight: 400;
  line-height: $line-height-headline-small;
  margin: 0;
}

// Dialog Description (MD3 Body Medium)
[data-slot="dialog-description"],
.dialog-description {
  color: $on-surface-variant;
  font-size: $font-body-medium;
  line-height: $line-height-body-medium;
  margin: 0;
}

// Dialog Footer (Actions)
[data-slot="dialog-footer"],
.dialog-footer {
  display: flex;
  gap: $size-2;
  justify-content: flex-end;
  margin-top: $size-6;
}

// Dialog Close Button
[data-slot="dialog-close"],
.dialog-close {
  align-items: center;
  background: transparent;
  border: none;
  border-radius: $radius-full;
  color: $on-surface-variant;
  cursor: pointer;
  display: flex;
  height: 40px;
  justify-content: center;
  position: absolute;
  right: $size-4;
  top: $size-4;
  transition: background-color $duration-short-4 $easing-standard;
  width: 40px;

  &:hover {
    background-color: rgba($on-surface, $state-hover-opacity);
  }

  &:focus-visible {
    background-color: rgba($on-surface, $state-focus-opacity);
    outline: none;
  }
}

// ============================================
// MD3 Dropdown Menu
// ============================================
[data-slot="dropdown-menu-content"],
.dropdown-content {
  animation: md3-menu-enter $duration-short-4 $easing-emphasized-decelerate;
  background: $surface-container;
  border: none;
  border-radius: $radius-extra-small;
  box-shadow: $elevation-2;
  max-width: 280px;
  min-width: 112px;
  overflow: hidden;
  padding: $size-2 0;
  z-index: 50;

  &:focus {
    outline: none;
  }
}

// Dropdown Menu Item
[data-slot="dropdown-menu-item"],
.dropdown-item {
  align-items: center;
  color: $on-surface;
  cursor: pointer;
  display: flex;
  font-size: $font-body-large;
  gap: $size-3;
  line-height: $line-height-body-large;
  min-height: 48px;
  outline: none;
  padding: 0 $size-3;
  position: relative;
  transition: background-color $duration-short-4 $easing-standard;
  user-select: none;

  &:hover {
    background-color: rgba($on-surface, $state-hover-opacity);
  }

  &:focus {
    background-color: rgba($on-surface, $state-focus-opacity);
  }

  &:active {
    background-color: rgba($on-surface, $state-pressed-opacity);
  }

  &[data-disabled] {
    opacity: $state-disabled-opacity;
    pointer-events: none;
  }

  svg {
    color: $on-surface-variant;
    height: 24px;
    width: 24px;
  }
}

// Dropdown Menu Separator
[data-slot="dropdown-menu-separator"],
.dropdown-separator {
  background: $outline-variant;
  height: 1px;
  margin: $size-2 0;
}

// Dropdown Menu Label
[data-slot="dropdown-menu-label"],
.dropdown-label {
  color: $on-surface-variant;
  font-size: $font-label-large;
  font-weight: 500;
  padding: $size-2 $size-3;
}

// ============================================
// MD3 Popover
// ============================================
[data-slot="popover-content"],
.popover-content {
  animation: md3-menu-enter $duration-short-4 $easing-emphasized-decelerate;
  background: $surface-container;
  border: none;
  border-radius: $radius-medium;
  box-shadow: $elevation-2;
  min-width: 112px;
  padding: $size-4;
  width: auto;
  z-index: 50;

  &:focus {
    outline: none;
  }
}

// ============================================
// MD3 Select
// ============================================
[data-slot="select-trigger"],
.select-trigger {
  align-items: center;
  background: transparent;
  border: 1px solid $outline;
  border-radius: $radius-extra-small;
  color: $on-surface;
  cursor: pointer;
  display: flex;
  font-size: $font-body-large;
  justify-content: space-between;
  min-height: 56px;
  padding: $size-4;
  transition: border-color $duration-short-4 $easing-standard;
  width: 100%;

  &:hover {
    border-color: $on-surface;
  }

  &:focus {
    border-color: $primary;
    border-width: 2px;
    outline: none;
    padding: calc(#{$size-4} - 1px);
  }

  &[data-disabled] {
    opacity: $state-disabled-opacity;
    pointer-events: none;
  }

  svg {
    color: $on-surface-variant;
    height: 24px;
    width: 24px;
  }
}

[data-slot="select-content"],
.select-content {
  animation: md3-menu-enter $duration-short-4 $easing-emphasized-decelerate;
  background: $surface-container;
  border: none;
  border-radius: $radius-extra-small;
  box-shadow: $elevation-2;
  min-width: 112px;
  overflow: hidden;
  padding: $size-2 0;
  z-index: 50;
}

[data-slot="select-item"],
.select-item {
  align-items: center;
  color: $on-surface;
  cursor: pointer;
  display: flex;
  font-size: $font-body-large;
  min-height: 48px;
  outline: none;
  padding: 0 $size-3;
  position: relative;
  transition: background-color $duration-short-4 $easing-standard;
  user-select: none;

  &:hover {
    background-color: rgba($on-surface, $state-hover-opacity);
  }

  &:focus {
    background-color: rgba($on-surface, $state-focus-opacity);
  }

  &[data-state="checked"] {
    background-color: rgba($primary, 0.12);

    &::before {
      background: $primary;
      bottom: 0;
      content: '';
      left: 0;
      position: absolute;
      top: 0;
      width: 3px;
    }
  }

  &[data-disabled] {
    opacity: $state-disabled-opacity;
    pointer-events: none;
  }
}

// ============================================
// MD3 Alert Dialog
// ============================================
[data-slot="alert-dialog-content"],
.alert-dialog-content {
  animation: md3-dialog-enter $duration-medium-2 $easing-emphasized-decelerate;
  background: $surface-container-high;
  border: none;
  border-radius: $radius-extra-large;
  box-shadow: $elevation-3;
  left: 50%;
  max-width: 560px;
  padding: $size-6;
  position: fixed;
  top: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% - 48px);
  z-index: 50;

  &:focus {
    outline: none;
  }
}

// Alert Dialog with icon (optional)
.alert-dialog-icon {
  display: flex;
  justify-content: center;
  margin-bottom: $size-4;

  svg {
    color: $on-surface-variant;
    height: 24px;
    width: 24px;
  }

  &--error svg {
    color: $destructive;
  }
}

// ============================================
// MD3 Snackbar/Toast
// ============================================
.snackbar,
[data-slot="toast"] {
  align-items: center;
  animation: md3-snackbar-enter $duration-medium-1 $easing-emphasized-decelerate;
  background: $inverse-surface;
  border-radius: $radius-extra-small;
  box-shadow: $elevation-3;
  color: $inverse-on-surface;
  display: flex;
  font-size: $font-body-medium;
  gap: $size-2;
  min-height: 48px;
  padding: $size-3-5 $size-4;
}

.snackbar-action {
  background: transparent;
  border: none;
  color: $inverse-primary;
  cursor: pointer;
  font-size: $font-label-large;
  font-weight: 500;
  margin-left: auto;
  padding: 0 $size-2;
  transition: opacity $duration-short-4 $easing-standard;

  &:hover {
    opacity: 80%;
  }
}

// ============================================
// Namespace Selector (MD3 styled)
// ============================================
.namespace-select {
  align-items: center;
  background: $surface-container;
  border: 1px solid $outline-variant;
  border-radius: $radius-small;
  color: $on-surface;
  cursor: pointer;
  display: inline-flex;
  font-size: $font-label-large;
  font-weight: 500;
  gap: $size-2;
  padding: $size-2 $size-4;
  transition: all $duration-short-4 $easing-standard;

  svg {
    color: $on-surface-variant;
    height: 18px;
    transition: color $duration-short-4 $easing-standard;
    width: 18px;
  }

  &:hover {
    background: $surface-container-high;
    border-color: $outline;

    svg {
      color: $on-surface;
    }
  }

  &:focus {
    border-color: $primary;
    box-shadow: 0 0 0 2px rgba($primary, 0.2);
    outline: none;
  }
}

// ============================================
// Animations
// ============================================
@keyframes md3-fade-in {
  from {
    opacity: 0%;
  }

  to {
    opacity: 100%;
  }
}

@keyframes md3-dialog-enter {
  from {
    opacity: 0%;
    transform: translate(-50%, -48%) scale(0.95);
  }

  to {
    opacity: 100%;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes md3-menu-enter {
  from {
    opacity: 0%;
    transform: scale(0.95);
  }

  to {
    opacity: 100%;
    transform: scale(1);
  }
}

@keyframes md3-snackbar-enter {
  from {
    opacity: 0%;
    transform: translateY(100%);
  }

  to {
    opacity: 100%;
    transform: translateY(0);
  }
}
